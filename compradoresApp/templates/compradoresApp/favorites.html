{% extends "compradoresApp/base.html" %}
{% block title %}Favoritos{% endblock %}
{% block content %}
<h2>Tus Favoritos</h2>

{% if favs %}
  <div class="fav-list">
    {% for f in favs %}
      <div class="fav-item">
        <a href="{% url 'compradores:product_detail' f.product.pk %}">
          <div class="fav-thumb">
            {% if f.product.imagen %}
              <img src="{{ f.product.imagen.url }}" alt="{{ f.product.nombre }}">
            {% else %}
              <div class="placeholder small">Sin imagen</div>
            {% endif %}
          </div>

          <div class="fav-info">
            <h3>{{ f.product.nombre }}</h3>

            <p class="meta">
              {% if f.product.categoria %}
                {{ f.product.categoria.nombre }}
              {% else %}
                Sin categoría
              {% endif %}
            </p>

            <strong>${{ f.product.precio }}</strong>
          </div>
        </a>

        <div class="fav-actions">
          <form method="post" action="{% url 'compradores:toggle_favorite' f.product.pk %}">
            {% csrf_token %}
            <button class="btn ghost tiny">Quitar</button>
          </form>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>No tienes favoritos aún. Anda al 
     <a href="{% url 'compradores:catalog' %}">catálogo</a> 
     y guarda tus productos preferidos.
  </p>
{% endif %}

{% endblock %}
